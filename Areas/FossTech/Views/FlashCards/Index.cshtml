@model IEnumerable<FossTech.Models.StudyMaterialModels.FlashCard>

@{
    ViewData["Title"] = "FlashCard List";
}
<div class="mb-4">
    <input type="text" id="searchInput" class="form-control shadow-sm" placeholder="Search for Flash Card...">
</div>

<div class="row justify-content-center">
    <div class="col-md-12">
        <div class="card">
            <div class="d-flex card-header bg-primary text-white">
                <h5 class="mb-0 flex-grow-1">FlashCard Collection</h5>
                <span class="ms-auto">Manage your flashcards here</span>
            </div>

            <div class="card-body">
                <div class="text-right mb-3">
                    <a href="@Url.Action("Create")" class="btn btn-success">
                        <i class="fas fa-plus-circle"></i> Create New FlashCard
                    </a>
                </div>
                <table class="table table-striped table-bordered table-hover">
                    <thead>
                        <tr>
                            <th>Actions</th>
                            <th>#</th>
                            <th>Name</th>
                            <th>Question</th>
                            <th>Answer</th>
                            <th>Board</th>
                            <th>Standard</th>
                            <th>@Html.DisplayNameFor(model => model.IsPaid)</th>
                            <th>Sort Order</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var flashCard in Model)
                        {
                            <tr>
                                <td class="dropdown">
                                    <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i class="fa fa-cog" aria-hidden="true"></i></button>
                                    <div class="dropdown-menu dropdown-menu-right b-none contact-menu" x-placement="top-end" style="position: absolute; transform: translate3d(-77px, -95px, 0px); top: 0px; left: 0px; will-change: transform;">
                                        <a class="dropdown-item text-success" asp-action="Edit" asp-route-id="@flashCard.Id"><i class="icofont icofont-edit"></i>Edit</a>
                                        <a class="dropdown-item text-danger" asp-action="Delete" asp-route-id="@flashCard.Id"><i class="icofont icofont-ui-delete"></i>Delete</a>
                                    </div>
                                </td>
                                <td>@flashCard.Id</td>
                                <td>@flashCard.Name</td>
                                <td>
                                    @if (!string.IsNullOrEmpty(flashCard.QuestionImagePath))
                                    {
                                        <div>
                                            <img src="@flashCard.QuestionImagePath" alt="Question Image" style="width: 40px; height: 40px; object-fit: cover;" />
                                        </div>
                                    }
                                    @if (!string.IsNullOrEmpty(flashCard.Question))
                                    {
                                        <div>
                                            @flashCard.Question
                                        </div>
                                    }
                                </td>
                                <td>
                                    @if (!string.IsNullOrEmpty(flashCard.AnswerImagePath))
                                    {
                                        <div>
                                            <img src="@flashCard.AnswerImagePath" alt="Answer Image" style="width: 40px; height: 40px; object-fit: cover;" />
                                        </div>
                                    }
                                    @if (!string.IsNullOrEmpty(flashCard.Answer))
                                    {
                                        <div>
                                            @flashCard.Answer
                                        </div>
                                    }
                                </td>
                                <td>@Html.DisplayFor(modelItem => flashCard.Board.Name)</td>
                                <td>@Html.DisplayFor(modelItem => flashCard.Standard.Name)</td>
                                <td>@Html.DisplayFor(modelItem => flashCard.IsPaid)</td>
                                <td>@flashCard.SortOrder</td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
    <script>
        $('#searchInput').on('input', function () {
            var searchValue = $(this).val().toLowerCase();

            $('table tbody tr').each(function () {
                var rowText = $(this).text().toLowerCase();
                $(this).toggle(rowText.indexOf(searchValue) > -1);
            });
        });
    </script>
}

