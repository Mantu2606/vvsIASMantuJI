@model FossTech.Models.ProductModels.Product

@{
    ViewData["Title"] = Model.Name;
    var httpContextAccessor = new Microsoft.AspNetCore.Http.HttpContextAccessor();
    var request = httpContextAccessor.HttpContext.Request;
    var imageUrl = $"{request.Scheme}://{request.Host}{request.PathBase}{Model.Image}";
}

@section MetaTags{
    <meta name="description" content="@Model.ShortDescription">
    <meta name="keywords" content="@Model.ProductTags" />
    <!-- Image Meta Tags -->
    <meta property="og:image" content="@imageUrl">
    <meta property="og:image:width" content="400">
    <meta property="og:image:height" content="400">
    <meta property="og:image:type" content="image/jpg">
    <meta property="og:image:alt" content="@Model.Name">
}

<!--================Home Banner Area =================-->
<section class="banner_area my-3">
    <div class="banner_inner d-flex align-items-center">
        <div class="overlay"></div>
        <div class="container">
            <div class="row justify-content-center" style="background:aliceblue">
                <div class="col-lg-6">
                    <div class="banner_content text-center">
                        @* <h2>@Model.Name</h2> *@
                        <div class="page_link">
                            <a asp-controller="Home" asp-action="Index" style="margin:0 5px;">Home</a>/
                            <a asp-controller="Courses" asp-action="Index">Courses</a>/
                            <a href="#">@Model.Name</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!--================End Home Banner Area =================-->

<!--================ Start Course Details Area =================-->
<section class="course_details_area section_gap">
    <div class="container">
        <div class="row">
            <div class="col-lg-6">
                <div id="carouselExampleControls" class="carousel slide main_image" data-ride="carousel">
                    <div class="carousel-inner">
                        <div class="carousel-item active">
                            <img class="d-block w-100" src="@Model.Image" alt="First slide">
                        </div>
                        @foreach (var item in Model.Images)
                        {
                            <div class="carousel-item">
                                <img class="d-block w-100" src="@item.Img" alt="Second slide">
                            </div>
                        }
                    </div>
                    <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                        <span class="sr-only">Previous</span>
                    </a>
                    <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        <span class="sr-only">Next</span>
                    </a>
                </div>
            </div>
            <div class="col-lg-6">
                <div class="content_wrapper">
                    <h3 class="title">@Model.Name  ( Rs. @Model.FinalPrice )</h3>
                    <div class="content">
                        @Html.Raw(Model.Description)
                    </div>
                    <div class="button_group mb-5">
                        <button type="button" class="btn apply_btn" id="myModalBtn" style="background:var(--footerbackground);color:var(--footertext)">
                            Apply Now <span class="fa fa-arrow-right"></span>
                        </button>
                        @if (Model.PDF != null)
                        {
                            <a download="@Model.PDF" href="@Model.PDF" class="btn btn-warning pdf_btn">
                                PDF <span class="fa-solid fa-download"></span>
                            </a>
                        }
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!--================ End Course Details Area =================-->

    @if (Model.ProdutFaq.Any())
    {
    <div class="popular_courses section_gap_top">
            <div class="container">
                <div class="row justify-content-center">
                    <div class="col-lg-5">
                        <div class="main_title">
                            <h2 class="mb-3">Courses FAQ's</h2>
                        </div>
                    </div>
                </div>
            <section class="faq-section p-0">
                <div class="container">
                    <div class="row">
                        <!-- ***** FAQ Start ***** -->
                        <div class="col-md-12 card-body">
                            <div class="faq" id="accordion">
                                @foreach (var item in Model.ProdutFaq)
                                {
                                    @if (item == Model.ProdutFaq.First())
                                    {
                                        <div class="card">
                                            <div class="card-header" id="faqHeading-1" style="color:white">
                                                <div class="d-flex align-items-center mb-0">
                                                    <i class="fas fa-plus me-2"></i>
                                                    <h5 class="faq-title mb-0" data-bs-toggle="collapse" data-bs-target="#faqCollapse-@item.Id" aria-expanded="true" aria-controls="faqCollapse-1">
                                                        <span class="badge ">@* @item.Order *@</span>@item.Question
                                                    </h5>
                                                </div>

                                            </div>
                                            <div id="faqCollapse-@item.Id" class="collapse show" aria-labelledby="faqHeading-1" data-bs-parent="#accordion">
                                                <div class="card-body">
                                                    <p>@Html.Raw(item.Answer) </p>
                                                </div>
                                            </div>
                                        </div>
                                    }
                                    else
                                    {
                                        <div class="card">
                                            <div class="card-header" id="faqHeading-1" style="color:white">
                                                <div class="d-flex align-items-center mb-0">
                                                    <i class="fas fa-plus me-2"></i>
                                                    <h5 class="faq-title mb-0" data-bs-toggle="collapse" data-bs-target="#faqCollapse-@item.Id" data-aria-expanded="true" data-aria-controls="faqCollapse-1" style="cursor:pointer">
                                                        <span class="badge">@* @item.Order *@</span>@item.Question
                                                    </h5>
                                                </div>
                                            </div>
                                            <div id="faqCollapse-@item.Id" class="collapse" aria-labelledby="faqHeading-1" data-bs-parent="#accordion">
                                                <div class="card-body">
                                                    <p>@Html.Raw(item.Answer) </p>
                                                </div>
                                            </div>
                                        </div>
                                    }
                                }
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-12 text-center  ">
                        <a asp-controller="FAQS" asp-action="Index" class="tl-def-btn tl-4-def-btn" style="margin-top: 23px; margin-bottom: 22px">View More</a>
                    </div>
                </div>
            </section>
            </div>
        </div>
    }


<!--================ Start Popular Courses Area =================-->
 @* <div class="popular_courses mt-5">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-5">
                <div class="main_title">
                    <h2 class="mb-3">Related Courses</h2>
              </div>
            </div>
        </div>
        <div class="row">  *@
            
            @* <div class="col-lg-12">
                <div class="owl-carousel active_course">
                    @foreach (var item in ViewBag.RelatedProducts)
                    {
                        <div class="single_course">
                            <div class="course_head">
                                <a asp-controller="Courses" asp-action="Details" asp-route-id="@item.Id" asp-route-slug="@item.Slug">
                                    <img class="img-fluid" src="@item.Image" alt="" />
                                </a>

                            </div>
                            <div class="course_content"> *@
                                @* <span class="price">₹@item.FinalPrice</span> *@
                                @*<span class="tag mb-4 d-inline-block">@item.ProductCategories.FirstOrDefault()?.Category?.Name</span>*@
                                @* <h4 class="mb-3">
                                    <a asp-controller="Courses" asp-action="Details" asp-route-id="@item.Id" asp-route-slug="@item.Slug">@item.Name</a>
                                </h4>
                                <p>
                                    @item.ShortDescription
                                </p>
                            </div>
                        </div>
                    }
                </div>
            </div>
        </div>
    </div>
</div> *@
<!--================ End Popular Courses Area =================-->

<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <form asp-action="CoursesEnquiryForm">
        <div class="modal-content" style="background-color: var(--footerbackground) !important;">
            <div class="modal-header">
                <h5 style="color: var(--headerbackground);" class="modal-title" id="exampleModalLabel">Enquiry Form</h5>
                <button type="button" class="close text-white" data-bs-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                    <input type="hidden" name="ProductId" value="@ViewBag.ProductId" class="form-control" />
                    <div class="form-group mb-2">
                        <input type="text" name="Name" placeholder="Enter Your Name" class="form-control" />
                        <span  class="text-danger"></span>
                    </div>
                    <div class="form-group mb-2">
                        <input type="text" name="Phone" placeholder="Enter Your Phone Number" class="form-control" />
                        <span class="text-danger"></span>
                    </div>
                    <div class="form-group">
                        <input type="email" name="Email" placeholder="Enter Your Email" class="form-control" />
                        <span  class="text-danger"></span>
                    </div>
                
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                <button type="submit"  class="btn btn-primary">Submit</button>
            </div>
        </div>
        </form>
    </div>
</div>

@section Styles{
    <style>
        .faq-title {
            cursor: pointer;
            margin-bottom: 0;
            transition: color 0.3s ease;
        }


        .card-header {
            padding: 0.5rem 1rem;
            background-color: var(--footerbackground);
            border-bottom: 1px solid #e9ecef;
            transition: background-color 0.3s ease;
        }



        .collapse {
            transition: all 0.35s ease;
        }

        .card-body {
            padding: 1rem 1.25rem; /* Adjust padding for card body */
            border-top: 1px solid #e9ecef; /* Add border to separate from header */
        }

        .faq-icon {
            transition: transform 0.3s ease; /* Smooth icon transition */
        }

        .rotate-45 {
            transform: rotate(45deg); /* Rotate icon on collapse */
        }
    </style>
}

@section Scripts{
    <script>
        $(document).ready(function () {
            // Trigger the modal by clicking the button
            $("#myModalBtn").click(function () {
                $("#exampleModal").modal("show");
            });
        });
    </script>
    <script>
        // Optional: Change icon on collapse/expand
        document.querySelectorAll('.faq-title').forEach(faq => {
            faq.addEventListener('click', function () {
                const icon = this.previousElementSibling;
                if (icon.classList.contains('fa-plus')) {
                    icon.classList.remove('fa-plus');
                    icon.classList.add('fa-minus');
                } else {
                    icon.classList.remove('fa-minus');
                    icon.classList.add('fa-plus');
                }
            });
            document.querySelectorAll('.faq-title').forEach(faq => {
                faq.addEventListener('click', function () {
                    const icon = this.previousElementSibling;
                    icon.classList.toggle('rotate-90');
                });
            });
        });
    </script>
}